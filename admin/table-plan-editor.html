<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tischplan Editor</title>
    <link rel="stylesheet" href="./css/table-plan-editor.css">
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="section-title">Raumeinstellungen</div>
            <div class="form-group">
                <label for="roomWidth">Raumbreite (m)</label>
                <input type="number" id="roomWidth" min="1" max="100" step="0.1" value="10">
            </div>
            <div class="form-group">
                <label for="roomHeight">Raumlänge (m)</label>
                <input type="number" id="roomHeight" min="1" max="100" step="0.1" value="8">
            </div>
            <button class="btn btn-primary" id="updateRoom">Raum aktualisieren</button>

            <hr style="margin: 20px 0; border: none; border-top: 1px solid var(--border);">

            <div class="section-title">Tisch hinzufügen</div>
            <div class="form-group">
                <label for="tableNumber">Tischnummer</label>
                <input type="text" id="tableNumber" placeholder="T1">
            </div>
            <div class="form-group">
                <label for="tableShape">Form</label>
                <select id="tableShape">
                    <option value="rectangle">Rechteckig</option>
                    <option value="round">Rund</option>
                </select>
            </div>
            <div class="input-group">
                <div class="form-group">
                    <label for="tableWidth">Breite (cm)</label>
                    <input type="number" id="tableWidth" min="30" max="300" value="80">
                </div>
                <div class="form-group">
                    <label for="tableHeight">Höhe (cm)</label>
                    <input type="number" id="tableHeight" min="30" max="300" value="80">
                </div>
            </div>
            <button class="btn btn-success" id="addTable">Tisch hinzufügen</button>

            <hr style="margin: 20px 0; border: none; border-top: 1px solid var(--border);">

            <div class="section-title">Ausgewählter Tisch</div>
            <div id="selectedTableInfo">
                <p style="color: var(--text-secondary); font-size: 14px;">Kein Tisch ausgewählt</p>
            </div>
            <div id="selectedTableControls" style="display: none;">
                <div class="form-group">
                    <label for="selectedTableNumber">Tischnummer</label>
                    <input type="text" id="selectedTableNumber">
                </div>
                <div class="input-group">
                    <div class="form-group">
                        <label for="selectedTableWidth">Breite (cm)</label>
                        <input type="number" id="selectedTableWidth" min="30" max="300">
                    </div>
                    <div class="form-group">
                        <label for="selectedTableHeight">Höhe (cm)</label>
                        <input type="number" id="selectedTableHeight" min="30" max="300">
                    </div>
                </div>
                <div class="form-group">
                    <label for="selectedTableRotation">Rotation (°)</label>
                    <input type="number" id="selectedTableRotation" min="-180" max="180" step="1">
                </div>
                <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                    <button class="btn btn-primary btn-sm" id="updateSelectedTable">Aktualisieren</button>
                    <button class="btn btn-secondary btn-sm" id="deleteSelectedTable">Löschen</button>
                </div>
                <div style="display: flex; gap: 8px; margin-top: 8px; flex-wrap: wrap;">
                    <button class="btn btn-success btn-sm" id="copyTableFormat">Format kopieren</button>
                    <button class="btn btn-success btn-sm" id="pasteTableFormat" disabled>Format einfügen</button>
                </div>
            </div>

            <hr style="margin: 20px 0; border: none; border-top: 1px solid var(--border);">

            <div class="section-title">Layouts</div>
            <div class="form-group">
                <label for="layoutName">Layout Name</label>
                <input type="text" id="layoutName" placeholder="Hauptsaal Standard">
            </div>
            <button class="btn btn-success btn-sm" id="saveLayout">Layout speichern</button>
            
            <div class="layout-list" id="layoutList">
                <!-- Layouts werden hier eingefügt -->
            </div>
        </div>

        <div class="main-content">
            <div class="toolbar">
                <button class="btn btn-secondary btn-sm" id="clearCanvas">Alle löschen</button>
                <button class="btn btn-secondary btn-sm" id="toggleGrid">Raster ein/aus</button>
                <button class="btn btn-secondary btn-sm" id="toggleCollision">
                    <span id="collisionText">Kollision: Ein</span>
                </button>
                <div style="display: flex; align-items: center; gap: 8px;">
                    <label for="collisionMargin" style="font-size: 12px; color: var(--text-secondary);">Abstand:</label>
                    <input type="range" id="collisionMargin" min="0" max="10" value="2" 
                           style="width: 60px;" title="Kollisions-Abstand in Pixeln">
                    <span id="marginValue" style="font-size: 12px; color: var(--text-secondary); width: 20px;">2px</span>
                </div>
                <span style="margin-left: auto; font-size: 14px; color: var(--text-secondary);">
                    Maßstab: <span id="scaleInfo">1:100</span> | Zoom: <span id="zoomLevel">100%</span>
                </span>
            </div>
            
            <div class="canvas-container">
                <div class="canvas-wrapper" id="canvasWrapper">
                    <div class="canvas grid-background" id="canvas"></div>
                </div>
                
                <div class="zoom-controls">
                    <button class="btn btn-secondary btn-sm" id="zoomOut">-</button>
                    <button class="btn btn-secondary btn-sm" id="zoomReset">Anpassen</button>
                    <button class="btn btn-secondary btn-sm" id="zoomIn">+</button>
                </div>
                
                <div class="coordinates" id="coordinates">
                    X: 0m, Y: 0m
                </div>
            </div>
        </div>
    </div>

    <script src="./js/table-plan-editor.js"></script>
</body>
</html>